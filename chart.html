<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULMD Token Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
    <style>
        :root {
            --primary: #7e22ce;
            --secondary: #3b82f6;
            --accent: #f97316;
            --light: #f3f4f6;
            --dark: #1f2937;
            --gradient: linear-gradient(90deg, var(--primary), var(--secondary));
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #0f172a;
            color: var(--light);
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            background: radial-gradient(circle at top right, rgba(126, 34, 206, 0.2), transparent 30%),
                        radial-gradient(circle at bottom left, rgba(59, 130, 246, 0.2), transparent 30%);
            margin-bottom: 30px;
            border-radius: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(126, 34, 206, 0.7);
            }
            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(126, 34, 206, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(126, 34, 206, 0);
            }
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #d1d5db;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(126, 34, 206, 0.2);
        }

        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 i {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(126, 34, 206, 0.2);
        }

        .stat-card h3 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .chart-container {
            height: 300px;
            margin: 20px 0;
        }

        .holders-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .holder-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .holder-address {
            font-family: monospace;
            color: #d1d5db;
        }

        .holder-amount {
            font-weight: 700;
            color: var(--primary);
        }

        .wallet-section {
            text-align: center;
        }

        .wallet-address {
            font-family: monospace;
            background: rgba(15, 23, 42, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 15px 0;
            word-break: break-all;
            border: 1px solid rgba(126, 34, 206, 0.2);
        }

        .btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(126, 34, 206, 0.4);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
        }

        .status.success {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status.error {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
            border: 1px solid var(--error);
        }

        .status.info {
            background: rgba(59, 130, 246, 0.2);
            color: var(--secondary);
            border: 1px solid var(--secondary);
        }

        .loader {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-img">ULMD</div>
                <span>Unlimited Dollar</span>
            </div>
            <h1>Token Analytics Dashboard</h1>
            <p class="subtitle">Real-time metrics and analytics for ULMD on Pulse Chain</p>
        </header>

        <div class="card">
            <h2><i class="fas fa-chart-line"></i> Token Metrics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Supply</h3>
                    <div class="stat-value" id="totalSupply">--</div>
                </div>
                <div class="stat-card">
                    <h3>Total Holders</h3>
                    <div class="stat-value" id="totalHolders">--</div>
                </div>
                <div class="stat-card">
                    <h3>Daily Transactions</h3>
                    <div class="stat-value" id="dailyTransactions">--</div>
                </div>
                <div class="stat-card">
                    <h3>Market Cap</h3>
                    <div class="stat-value" id="marketCap">--</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2><i class="fas fa-users"></i> Top Holders</h2>
            <div class="holders-list" id="topHolders">
                <div class="holder-item">
                    <span class="holder-address">Loading top holders...</span>
                    <span class="holder-amount">--</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2><i class="fas fa-chart-pie"></i> Distribution</h2>
            <div class="chart-container">
                <canvas id="distributionChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h2><i class="fas fa-exchange-alt"></i> Transaction History</h2>
            <div class="chart-container">
                <canvas id="transactionChart"></canvas>
            </div>
        </div>

        <div class="card wallet-section">
            <h2><i class="fas fa-wallet"></i> Connect Wallet</h2>
            <p>Connect your wallet to view your ULMD balance and transaction history</p>
            
            <button id="connectWallet" class="btn">
                <i class="fas fa-plug"></i> Connect Wallet
            </button>
            
            <div id="walletInfo" style="display: none;">
                <div class="wallet-address">
                    Connected: <span id="walletAddress"></span>
                </div>
                
                <div class="stat-card" style="margin: 20px auto; max-width: 300px;">
                    <h3>Your ULMD Balance</h3>
                    <div class="stat-value" id="userBalance">--</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ULMD Token Contract Address (replace with actual address)
        const tokenAddress = "0x1234567890123456789012345678901234567890";
        
        // Pulse Chain RPC endpoint
        const rpcUrl = "https://rpc.pulsechain.com";
        
        // Initialize Web3
        let web3;
        
        // Token ABI (simplified for ERC-20)
        const tokenABI = [
            {
                "constant": true,
                "inputs": [],
                "name": "name",
                "outputs": [{"name": "", "type": "string"}],
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [],
                "name": "totalSupply",
                "outputs": [{"name": "", "type": "uint256"}],
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{"name": "_owner", "type": "address"}],
                "name": "balanceOf",
                "outputs": [{"name": "balance", "type": "uint256"}],
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [],
                "name": "decimals",
                "outputs": [{"name": "", "type": "uint8"}],
                "type": "function"
            }
        ];

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Initialize Web3
                if (typeof window.ethereum !== 'undefined') {
                    web3 = new Web3(window.ethereum);
                    document.getElementById('connectWallet').addEventListener('click', connectWallet);
                } else {
                    // Fallback to Pulse Chain RPC if no Web3 wallet
                    web3 = new Web3(new Web3.providers.HttpProvider(rpcUrl));
                    document.getElementById('connectWallet').style.display = 'none';
                }
                
                // Load token data
                await loadTokenData();
                
                // Set up charts
                setupCharts();
                
            } catch (error) {
                console.error('Error initializing dashboard:', error);
            }
        });

        // Connect wallet function
        async function connectWallet() {
            try {
                // Request account access
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                const account = accounts[0];
                
                // Display connected wallet
                document.getElementById('walletAddress').textContent = account;
                document.getElementById('walletInfo').style.display = 'block';
                
                // Load user balance
                await loadUserBalance(account);
                
            } catch (error) {
                console.error('Error connecting wallet:', error);
            }
        }

        // Load token data from blockchain
        async function loadTokenData() {
            try {
                // Create token contract instance
                const tokenContract = new web3.eth.Contract(tokenABI, tokenAddress);
                
                // Get total supply
                const totalSupply = await tokenContract.methods.totalSupply().call();
                document.getElementById('totalSupply').textContent = formatNumber(web3.utils.fromWei(totalSupply, 'ether')) + ' ULMD';
                
                // Estimate market cap (assuming price of $0.001 for demo)
                const marketCap = Number(web3.utils.fromWei(totalSupply, 'ether')) * 0.001;
                document.getElementById('marketCap').textContent = '$' + formatNumber(marketCap);
                
                // For demo purposes, we'll use mock data since we can't actually fetch from blockchain here
                document.getElementById('totalHolders').textContent = '1,254';
                document.getElementById('dailyTransactions').textContent = '287';
                
                // Load mock top holders
                loadMockTopHolders();
                
            } catch (error) {
                console.error('Error loading token data:', error);
            }
        }

        // Load user balance
        async function loadUserBalance(address) {
            try {
                // Create token contract instance
                const tokenContract = new web3.eth.Contract(tokenABI, tokenAddress);
                
                // Get user balance
                const balance = await tokenContract.methods.balanceOf(address).call();
                document.getElementById('userBalance').textContent = formatNumber(web3.utils.fromWei(balance, 'ether')) + ' ULMD';
                
            } catch (error) {
                console.error('Error loading user balance:', error);
            }
        }

        // Load mock top holders (in a real scenario, this would come from the blockchain)
        function loadMockTopHolders() {
            const holdersList = document.getElementById('topHolders');
            holdersList.innerHTML = '';
            
            const mockHolders = [
                { address: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e', amount: '5,240,000' },
                { address: '0x4B5922ABf25858d012d12bb1184e5d3d0B6D6BE4', amount: '3,850,000' },
                { address: '0x5A0b54D5dc17e0AadC383d2db43B0a0D3E029c4c', amount: '2,100,000' },
                { address: '0x6B175474E89094C44Da98b954EedeAC495271d0F', amount: '1,750,000' },
                { address: '0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9', amount: '1,250,000' },
                { address: '0x8E870D67F660D95d5be530380D0eC0bd388289E1', amount: '980,000' },
                { address: '0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2', amount: '750,000' },
                { address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', amount: '620,000' },
                { address: '0xB8c77482e45F1F44dE1745F52C74426C631bDD52', amount: '500,000' },
                { address: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2', amount: '450,000' }
            ];
            
            mockHolders.forEach(holder => {
                const holderItem = document.createElement('div');
                holderItem.className = 'holder-item';
                holderItem.innerHTML = `
                    <span class="holder-address">${formatAddress(holder.address)}</span>
                    <span class="holder-amount">${holder.amount} ULMD</span>
                `;
                holdersList.appendChild(holderItem);
            });
        }

        // Set up charts with mock data
        function setupCharts() {
            // Distribution chart
            const distCtx = document.getElementById('distributionChart').getContext('2d');
            new Chart(distCtx, {
                type: 'pie',
                data: {
                    labels: ['Top 10 Holders', 'Other Holders', 'Liquidity Pool', 'Team', 'Airdrop Reserve'],
                    datasets: [{
                        data: [45, 30, 15, 7, 3],
                        backgroundColor: [
                            '#7e22ce', '#3b82f6', '#f97316', '#10b981', '#f59e0b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#d1d5db'
                            }
                        }
                    }
                }
            });
            
            // Transaction chart
            const transCtx = document.getElementById('transactionChart').getContext('2d');
            new Chart(transCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Daily Transactions',
                        data: [120, 190, 300, 250, 200, 180, 287],
                        borderColor: '#7e22ce',
                        backgroundColor: 'rgba(126, 34, 206, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#d1d5db'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#d1d5db'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#d1d5db'
                            }
                        }
                    }
                }
            });
        }

        // Utility function to format numbers with commas
        function formatNumber(num) {
            return Number(num).toLocaleString('en-US', { maximumFractionDigits: 2 });
        }

        // Utility function to format addresses
        function formatAddress(address) {
            return address.substring(0, 6) + '...' + address.substring(address.length - 4);
        }
    </script>
</body>
</html>
